<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opium</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="#home">Inicio</a></li>
                <li><a href="/IAgotic">Habla con la IA</a></li>
                <li><a href="#artists">Artistas</a></li>
                <li><a href="#generate">Generar</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="home" class="hero">
            <!-- Video de catedral gótica -->
            <video autoplay muted loop class="hero-video">
                <source src="{{ url_for('static', filename='videos/Calavera.mp4') }}" type="video/mp4">
                Tu navegador no soporta la etiqueta de video.
            </video>
            <div class="hero-content">
                <h1>Dark Music AI</h1>
                <p>Genera beats y habla con el chat bot Carti para escuchar las mejores o remixes del momento inspirados en Playboi Carti y Ken Carson.</p>
            </div>
        </section>
        <section id="about" class="about">
            <h2>Sobre nuestra IA</h2>
            <p>Utilizamos algoritmos avanzados para crear beats únicos en el estilo de tus artistas favoritos.</p>
            
            <!-- Sección de hover con imagen y descripción -->
            <div class="info-container">
                <!-- Hover pequeño a la izquierda -->
                <div class="hover-container">
                    <div class="hover-info">
                        <img src="{{ url_for('static', filename='images/I AM MUSIC.jpg') }}" alt="AI Music Generation" class="hover-image">
                        <div class="hover-description">
                            <p>¡Descubre cómo nuestra IA puede generar beats únicos al estilo de tus artistas favoritos!</p>
                        </div>
                    </div>
                </div>
                
                <!-- Descripción de Playboi Carti a la derecha -->
                <div class="carti-description">
                    <h3>¿Por qué Playboi Carti es uno de los mejores raperos?</h3>
                    <p>Playboi Carti es conocido por su estilo innovador y su habilidad para fusionar elementos del trap con un enfoque melódico único. Su música tiene una energía contagiosa y sus letras a menudo exploran temas de estilo de vida y moda, creando una conexión profunda con su audiencia. Además, su capacidad para experimentar con sonidos y colaborar con otros artistas ha establecido un nuevo estándar en el género.</p>
                </div>
            </div>
        </section>
        <section id="artists" class="artists">
            <h2>Artistas Inspiradores</h2>
            <div class="artist-cards">
                <div class="artist-card">
                    <div class="card-inner">
                        <div class="card-front">
                            <img src="{{ url_for('static', filename='images/KenCarson.jpg') }}" alt="Ken Carson">
                            <h3>Ken Carson</h3>
                        </div>
                        <div class="card-back">
                            <video class="artist-video" loop muted>
                                <source src="{{ url_for('static', filename='videos/ken_carson.mp4') }}" type="video/mp4">
                            </video>
                            <h3>Canciones Populares</h3>
                            <ul class="song-list">
                                <li>
                                    <span>Yale</span>
                                    <button class="play-btn" data-src="{{ url_for('static', filename='music/ken_carson_yale.mp3') }}">&#9658;</button>
                                </li>
                                <li>
                                    <span>Rock N Roll</span>
                                    <button class="play-btn" data-src="{{ url_for('static', filename='music/ken_carson_rock_n_roll.mp3') }}">&#9658;</button>
                                </li>
                                <li>
                                    <span>Freestyle 2</span>
                                    <button class="play-btn" data-src="{{ url_for('static', filename='music/ken_carson_freestyle_2.mp3') }}">&#9658;</button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="artist-card">
                    <div class="card-inner">
                        <div class="card-front">
                            <img src="{{ url_for('static', filename='images/Redcarti.jpg') }}" alt="Playboi Carti">
                            <h3>Playboi Carti</h3>
                        </div>
                        <div class="card-back">
                            <video class="artist-video" loop muted>
                                <source src="{{ url_for('static', filename='videos/playboi_carti.mp4') }}" type="video/mp4">
                            </video>
                            <h3>Canciones Populares</h3>
                            <ul class="song-list">
                                <li>
                                    <span>Magnolia</span>
                                    <button class="play-btn" data-src="{{ url_for('static', filename='music/playboi_carti_magnolia.mp3') }}">&#9658;</button>
                                </li>
                                <li>
                                    <span>Shoota</span>
                                    <button class="play-btn" data-src="{{ url_for('static', filename='music/playboi_carti_shoota.mp3') }}">&#9658;</button>
                                </li>
                                <li>
                                    <span>Sky</span>
                                    <button class="play-btn" data-src="{{ url_for('static', filename='music/playboi_carti_sky.mp3') }}">&#9658;</button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <style>
        .artist-cards {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        
        .artist-card {
            width: 300px;
            height: 400px;
            perspective: 1000px;
            margin: 20px;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }
        
        .artist-card:hover .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #222;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .card-back {
            transform: rotateY(180deg);
            padding: 20px;
            box-sizing: border-box;
        }
        
        .artist-video {
            width: 100%;
            height: 150px;
            object-fit: cover;
            margin-bottom: 10px;
        }
        
        .song-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
            width: 100%;
        }
        
        .song-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .play-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
        </style>
        
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            const artistCards = document.querySelectorAll('.artist-card');
            const audioPlayer = document.getElementById('audio-player');
        
            artistCards.forEach(card => {
                const video = card.querySelector('.artist-video');
                const playButtons = card.querySelectorAll('.play-btn');
        
                card.addEventListener('mouseenter', () => {
                    video.play();
                });
        
                card.addEventListener('mouseleave', () => {
                    video.pause();
                    video.currentTime = 0;
                });
        
                playButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const songSrc = button.getAttribute('data-src');
                        audioPlayer.src = songSrc;
                        audioPlayer.play();
                    });
                });
            });
        });
        </script>
<section id="generate" class="generate">
    <h2>Genera tu Beat Personalizado</h2>
    <form id="beat-form" method="POST" action="/generate-beat">
        <div class="form-group">
            <label for="style">Estilo:</label>
            <select id="style" name="style" required>
                <option value="carti">Playboi Carti</option>
                <option value="carson">Ken Carson</option>
                <option value="bleesd">Bleesd</option>
                <option value="mix">Mezcla</option>
            </select>
        </div>
        <div class="form-group">
            <label for="duration">Duración (segundos):</label>
            <input type="range" id="duration" name="duration" min="30" max="180" value="60" step="10" required>
            <output for="duration" id="duration-output">60 segundos</output>
        </div>
        <div class="form-group">
            <label for="mood">Estado de ánimo:</label>
            <select id="mood" name="mood" required>
                <option value="energetic">Energético</option>
                <option value="chill">Relajado</option>
                <option value="dark">Oscuro</option>
                <option value="euphoric">Eufórico</option>
            </select>
        </div>
        
        </div>
        <div class="form-group">
            <label for="bpm">BPM:</label>
            <input type="number" id="bpm" name="bpm" min="60" max="200" value="140" required>
        </div>
        <button type="submit" class="generate-button">Generar Beat</button>
    </form>

    <div id="beat-preview" style="display: none;">
        <h3>Vista previa del Beat</h3>
        <div id="waveform"></div>
        <button id="play-pause">Reproducir</button>
        <button id="download" disabled>Descargar Beat</button>
    </div>

    <section id="beat-list">
        <h3>Beats Generados</h3>
        <ul id="beat-items"></ul>
    </section>
</section>

<script src="https://unpkg.com/wavesurfer.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const beatForm = document.getElementById('beat-form');
    const generateButton = document.querySelector('.generate-button');
    const loadingIndicator = document.createElement('div');
    const durationInput = document.getElementById('duration');
    const durationOutput = document.getElementById('duration-output');

    durationInput.addEventListener('input', function() {
        durationOutput.textContent = `${durationInput.value} segundos`;
    });
    loadingIndicator.textContent = 'Generando beat...';
    loadingIndicator.style.display = 'none';
    beatForm.appendChild(loadingIndicator);

    if (beatForm) {
        beatForm.addEventListener('submit', function(e) {
            e.preventDefault();
            generateButton.disabled = true;
            loadingIndicator.style.display = 'block';

            const formData = new FormData(beatForm);

            fetch('/generate-beat', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(err => { throw err; });
                }
                return response.json();
            })
            .then(data => {
                if (data.filename) {
                    const beatList = document.getElementById('beat-items');
                    const beatItem = document.createElement('li');
                    beatItem.innerHTML = `
                        <a href="/static/beats/${data.filename}" target="_blank">${data.filename}</a>
                        <button onclick="downloadBeat('${data.filename}')">Descargar</button>
                    `;
                    beatList.appendChild(beatItem);
                    alert('Beat generado con éxito!');
                }
            })
            .catch(error => {
                console.error('Error detallado al generar el beat:', error);
                alert('Hubo un error al generar el beat: ' + (error.error || 'Error desconocido'));
            })
            .finally(() => {
                generateButton.disabled = false;
                loadingIndicator.style.display = 'none';
            });
        });
    }
});

function downloadBeat(filename) {
    window.location.href = `/download-beat/${filename}`;
}
</script>



    
        
    </main>
    <footer>
        <p>&copy; 2024 Dark Music AI. Todos los derechos reservados.</p>
    </footer>
    
    <!-- Reproductor de música -->
    <div class="music-player-container">
        <div class="music-player">
            <div class="music-icon">
                <img src="{{ url_for('static', filename='images/Music.jpg') }}" alt="Music Icon">
            </div>
            <audio id="audio-player" controls>
                <source src="{{ url_for('static', filename='Music/Conde.mp3') }}" type="audio/mpeg">
                Tu navegador no soporta el elemento de audio.
            </audio>
        </div>
    </div>



<script>
    document.addEventListener('DOMContentLoaded', function() {
        const chatbotButton = document.querySelector('.chatbot-button');
        const chatWindow = document.createElement('div');
        chatWindow.className = 'chat-window';
        chatWindow.style.display = 'none';
        
        chatWindow.innerHTML = `
            <div class="chat-header">
                <h3>Chat con Playboi Carti</h3>
                <button class="chat-close">&times;</button>
            </div>
            <div class="chat-messages"></div>
            <div class="chat-input">
                <input type="text" placeholder="Escribe un mensaje...">
                <button>Enviar</button>
            </div>
        `;
        
        document.body.appendChild(chatWindow);
        
        chatbotButton.addEventListener('click', function() {
            chatWindow.style.display = 'flex';
        });

        const closeButton = chatWindow.querySelector('.chat-close');
        closeButton.addEventListener('click', function() {
            chatWindow.style.display = 'none';
        });
    });
</script>
</html>
